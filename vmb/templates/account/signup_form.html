{% load i18n %}
{% load crispy_forms_tags %}
{% load crispy_forms_field %}

<form class="signup" id="signup_form" method="post" action="{% url 'account_signup' %}">
    {% csrf_token %}
    {% if compact %}
    <div>
    {% endif %}
    {% if form.non_field_errors %}
        <div class="is-invalid" style="display:none"></div>
        {% for error in form.non_field_errors %}
            <div class="invalid-feedback">{{ error }}</div>
        {% endfor %}
    {% endif %}

    <div class="form-group">
        <label for="{{form.email.id_for_label}}">Email address</label>
        {% crispy_field form.email 'class' 'form-control-sm' %}
        {% if form.email.errors %}
            {% for error in form.email.errors %}
                <div class="invalid-feedback">{{ error }}</div>
            {% endfor %}
        {% endif %}
    </div>

    <div class="form-row">
        <div class="form-group col-md-6">
            <label for="{{ form.password1.id_for_label}}password">Password</label>
            <div class="input-group input-group-sm input-group-merge">
                {% crispy_field form.password1 'class' 'form-control-sm' %}
                <div class="input-group-append" data-password="false">
                    <div class="input-group-text">
                        <span class="password-eye"></span>
                    </div>
                </div>
                {% if form.password1.errors %}
                    {% for error in form.password1.errors %}
                        <div class="invalid-feedback">{{ error }}</div>
                    {% endfor %}
                {% endif %}
            </div>
        </div>

        <div class="form-group col-md-6">
            <label for="{{ form.password2.id_for_label}}password">Password (confirm)</label>
            <div class="input-group input-group-sm input-group-merge">
                {% crispy_field form.password2 'class' 'form-control-sm'  %}
                <div class="input-group-append" data-password="false">
                    <div class="input-group-text">
                        <span class="password-eye"></span>
                    </div>
                </div>
                {% if form.password2.errors %}
                    {% for error in form.password2.errors %}
                        <div class="invalid-feedback">{{ error }}</div>
                    {% endfor %}
                {% endif %}
            </div>
        </div>
    </div>

    <div class="form-group">
        <label for="{{ form.name.id_for_label}}">Legal name</label>
        {% crispy_field form.name 'class' 'form-control-sm'  %}
        {% if form.name.errors %}
            {% for error in form.name.errors %}
                <div class="invalid-feedback">{{ error }}</div>
            {% endfor %}
        {% endif %}
    </div>

    <div class="form-row">
        <div class="form-group col-md-6">
            <label for="{{ form.gender.id_for_label}}">Gender</label>
            {% crispy_field form.gender 'css' 'select2' 'data-toggle' 'select2' 'class' 'form-control-sm' %}
            {% if form.gender.errors %}
                {% for error in form.gender.errors %}
                    <div class="invalid-feedback">{{ error }}</div>
                {% endfor %}
            {% endif %}
        </div>
        <div class="form-group col-md-6">
            <label for="{{ form.marital_status.id_for_label}}">Marital status</label>
            {% crispy_field form.marital_status 'css' 'select2' 'data-toggle' 'select2' 'class' 'form-control-sm' %}
            {% if form.marital_status.errors %}
                {% for error in form.marital_status.errors %}
                    <div class="invalid-feedback">{{ error }}</div>
                {% endfor %}
            {% endif %}
        </div>
    </div>
    
    <div class="form-row">
        <div class="form-group col-md-6">
            <label for="{{ form.phone.id_for_label}}">Mobile number</label>
            {% crispy_field form.phone 'class' 'form-control-sm' %}
            {% if form.phone.errors %}
                {% for error in form.phone.errors %}
                    <div class="invalid-feedback">{{ error }}</div>
                {% endfor %}
            {% endif %}
        </div>
        <div class="form-group col-md-6">
            <label for="{{ form.dob.id_for_label}}">Date of birth</label>
            {% crispy_field form.dob 'class' 'form-control-sm' %}
            {% if form.dob.errors %}
                {% for error in form.dob.errors %}
                    <div class="invalid-feedback">{{ error }}</div>
                {% endfor %}
            {% endif %}
        </div>
    </div>

    <div class="form-group">
        <label for="{{ form.rounds_chanting.id_for_label}}">Number of rounds of Hare Krishna Maha Mantra chanting</label>
        {% crispy_field form.rounds_chanting 'class' 'form-control-sm' %}
        {% if form.rounds_chanting.errors %}
            {% for error in form.rounds_chanting.errors %}
                <div class="invalid-feedback">{{ error }}</div>
            {% endfor %}
        {% endif %}
    </div>

    <div class="form-row">
        <div class="form-group col-md-6">
            <label for="{{ form.profile_created_by.id_for_label}}">Profile created by</label>
            {% crispy_field form.profile_created_by 'css' 'select2' 'data-toggle' 'select2'  'class' 'form-control-sm' %}
            {% if form.profile_created_by.errors %}
                {% for error in form.profile_created_by.errors %}
                    <div class="invalid-feedback">{{ error }}</div>
                {% endfor %}
            {% endif %}
        </div>

        <div class="form-group col-md-6">
            <label for="{{ form.contact_person_name.id_for_label}}">Contact person name</label>
            {% crispy_field form.contact_person_name %}
            {% if form.contact_person_name.errors %}
                {% for error in form.contact_person_name.errors %}
                    <div class="invalid-feedback">{{ error }}</div>
                {% endfor %}
            {% endif %}
        </div>

    </div>
    {% if compact %}
    </div>
    {% endif %}

    <div class="form-group">
        <div class="custom-control custom-checkbox">
            <input type="checkbox" class="custom-control-input" id="checkbox-signup" required>
            <label class="custom-control-label" for="checkbox-signup">I accept <a href="/terms/" class="text-muted">Terms and Conditions</a> & <a href="/privacy/" class="text-muted">Privacy Policy</a></label>
        </div>
    </div>

    <div class="form-group mb-0 text-center">
        <button class="btn btn-primary btn-block" type="submit"> Sign Up </button>
    </div>

</form>